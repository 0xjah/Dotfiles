# ~/.config/yazi/yazi.toml

[opener]

# Text files
edit = [
  { run = '$EDITOR "$@"', block = true, for = "unix" },
]

# Documents (PDF, EPUB, etc)
document = [
  { run = 'zathura "$@"', orphan = true, desc = "Open with zathura" },
  { run = 'okular "$@"', orphan = true, desc = "Open with okular" },
  { run = 'pdftotext "$@" - | less', block = true, desc = "View as text" },
]

# Images
image = [
  { run = 'sxiv "$@"', orphan = true, desc = "View with sxiv" },
  { run = 'feh "$@"', orphan = true, desc = "View with feh" },
]

# Videos
video = [
  { run = 'mpv "$@"', orphan = true, desc = "Play with mpv" },
  { run = 'ffplay "$@"', orphan = true, desc = "Play with ffplay" },
]

# Audio
audio = [
  { run = 'mpv --no-video "$@"', orphan = true, desc = "Play with mpv" },
]

# Archives
archive = [
  { run = 'atool -l "$@" | less', block = true, desc = "List contents" },
  { run = 'atool -x "$@"', block = true, desc = "Extract here" },
]

# Office documents
office = [
  { run = 'libreoffice "$@"', orphan = true, desc = "Open in LibreOffice" },
  { run = 'pandoc "$@" -t plain | less', block = true, desc = "View as text" },
]

# Presentations
presentation = [
  { run = 'okular "$@"', orphan = true, desc = "Open in okular" },
  { run = 'libreoffice "$@"', orphan = true, desc = "Open in LibreOffice" },
  { run = 'pdfpc "$@"', orphan = true, desc = "Present with pdfpc" },
]

# HTML
html = [
  { run = 'librewolf "$@"', orphan = true, desc = "Open in browser" },
  { run = 'w3m "$@"', block = true, desc = "View with w3m" },
]

# Markdown
markdown = [
  { run = '$EDITOR "$@"', block = true, desc = "Edit" },
  { run = 'glow -p "$@"', block = true, desc = "View as text" },
]

# JSON/YAML
data = [
  { run = 'jq . "$@" | less', block = true, desc = "View JSON with jq" },
  { run = '$EDITOR "$@"', block = true, desc = "Edit" },
]

# Spreadsheets
spreadsheet = [
  { run = 'sc-im "$@"', block = true, desc = "Open with sc-im" },
]

# Torrents
torrent = [
  { run = 'transmission-remote-cli -a "$@"', block = true, desc = "Add to transmission" },
]

[open]
rules = [
  # Text
  { mime = "text/*", use = "edit" },
  
  # Documents
  { mime = "application/pdf", use = "document" },
  { mime = "application/epub+zip", use = "document" },
  { name = "*.djvu", use = "document" },
  
  # Images
  { mime = "image/*", use = "image" },
  
  # Videos
  { mime = "video/*", use = "video" },
  { name = "*.mkv", use = "video" },
  { name = "*.mp4", use = "video" },
  { name = "*.avi", use = "video" },
  { name = "*.mov", use = "video" },
  { name = "*.webm", use = "video" },
  { name = "*.flv", use = "video" },
  
  # Audio
  { mime = "audio/*", use = "audio" },
  { name = "*.mp3", use = "audio" },
  { name = "*.flac", use = "audio" },
  { name = "*.ogg", use = "audio" },
  { name = "*.m4a", use = "audio" },
  { name = "*.opus", use = "audio" },
  
  # Archives
  { mime = "application/zip", use = "archive" },
  { mime = "application/x-tar", use = "archive" },
  { mime = "application/x-bzip2", use = "archive" },
  { mime = "application/x-7z-compressed", use = "archive" },
  { mime = "application/x-rar", use = "archive" },
  { name = "*.gz", use = "archive" },
  { name = "*.xz", use = "archive" },
  { name = "*.tar.*", use = "archive" },
  
  # Office
  { mime = "application/vnd.openxmlformats-officedocument.*", use = "office" },
  { mime = "application/vnd.oasis.opendocument.*", use = "office" },
  { name = "*.docx", use = "office" },
  { name = "*.xlsx", use = "office" },
  { name = "*.ods", use = "office" },
  
  # Presentations
  { name = "*.pptx", use = "presentation" },
  { name = "*.odp", use = "presentation" },
  { name = "*.ppt", use = "presentation" },
  
  # Spreadsheets
  { name = "*.csv", use = "spreadsheet" },
  { name = "*.sc", use = "spreadsheet" },
  
  # HTML
  { mime = "text/html", use = "html" },
  
  # Markdown
  { name = "*.md", use = "markdown" },
  { name = "*.markdown", use = "markdown" },
  
  # JSON/YAML
  { name = "*.json", use = "data" },
  { name = "*.yaml", use = "data" },
  { name = "*.yml", use = "data" },
  
  # Torrents
  { name = "*.torrent", use = "torrent" },
  
  # Fallback
  { mime = "*", use = "edit" },
]
